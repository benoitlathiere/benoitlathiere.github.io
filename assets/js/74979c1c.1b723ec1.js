"use strict";(self.webpackChunkmadoc=self.webpackChunkmadoc||[]).push([[2698],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=u(n),d=a,g=c["".concat(l,".").concat(d)]||c[d]||m[d]||i;return n?r.createElement(g,s(s({ref:t},p),{},{components:n})):r.createElement(g,s({ref:t},p))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,s=new Array(i);s[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[c]="string"==typeof e?e:a,s[1]=o;for(var u=2;u<i;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2867:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const i={slug:"decouvrir-docusaurus",title:"D\xe9couvrir Docusaurus pour faire un site statique",authors:["benoit"],tags:["Docusaurus","blog","Static Site Generator","SSG"],hide_table_of_contents:!1},s=void 0,o={permalink:"/blog/decouvrir-docusaurus",source:"@site/blog/2022-04-decouvrir-docusaurus.md",title:"D\xe9couvrir Docusaurus pour faire un site statique",description:"Docusaurus est un framework d\xe9velopp\xe9 par Facebook et qui permet de g\xe9n\xe9rer un site statique. Le Javascript moderne permet de nombreux modes de d\xe9veloppement, et la g\xe9n\xe9ration de site statique (Static Site Generator, SSG) pour h\xe9berger les pages sur des serveurs sans moteur de script (ni PHP, ni Java, ...).",date:"2022-04-10T19:05:48.057Z",formattedDate:"10 avril 2022",tags:[{label:"Docusaurus",permalink:"/blog/tags/docusaurus"},{label:"blog",permalink:"/blog/tags/blog"},{label:"Static Site Generator",permalink:"/blog/tags/static-site-generator"},{label:"SSG",permalink:"/blog/tags/ssg"}],readingTime:2.79,hasTruncateMarker:!0,authors:[{name:"Benoit Lathi\xe8re",title:"Author",url:"https://github.com/benoitlathiere",imageURL:"img/docusaurus.png",key:"benoit"}],frontMatter:{slug:"decouvrir-docusaurus",title:"D\xe9couvrir Docusaurus pour faire un site statique",authors:["benoit"],tags:["Docusaurus","blog","Static Site Generator","SSG"],hide_table_of_contents:!1},prevItem:{title:"Installer Docker Desktop sur Windows 10 Famille",permalink:"/blog/install-docker-window-10-famille"},nextItem:{title:"FCGID et wwsympa",permalink:"/blog/FCGID-wwsympa-post"}},l={authorsImageUrls:[void 0]},u=[{value:"D\xe9ploiement",id:"d\xe9ploiement",level:2}],p={toc:u},c="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://docusaurus.io/"},"Docusaurus")," est un framework d\xe9velopp\xe9 par Facebook et qui permet de g\xe9n\xe9rer un site statique. Le Javascript moderne permet de nombreux modes de d\xe9veloppement, et la g\xe9n\xe9ration de site statique (",(0,a.kt)("em",{parentName:"p"},"Static Site Generator, SSG"),") pour h\xe9berger les pages sur des serveurs sans moteur de script (ni PHP, ni Java, ...). "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    **Article en cours d'\xe9criture***\n")),(0,a.kt)("p",null,"Quel int\xe9r\xeat ? un site statique est beaucoup plus rapide \xe0 afficher dans les navigateurs (pas de script ou de base de donn\xe9es c\xf4t\xe9 serveur), ce qui est id\xe9al si vous avez des pages qui ne changent peu (pas exemple un blog ou un site de documentation). "),(0,a.kt)("p",null,"Evidemment, \xe7a ne se pr\xeate pas \xe0 un site de e-commerce en perp\xe9tuelle modification (certaines parties peuvent \xeatre g\xe9n\xe9r\xe9es par avance mais les pages affich\xe9es pr\xe9sentent toujours certaines donn\xe9es g\xe9n\xe9r\xe9es en direct)."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"nouvelle cl\xe9 ssh dans ~/.ssh/ : ",(0,a.kt)("inlineCode",{parentName:"li"},'ssh-keygen -t ed25519 -C "your_email@example.com"')),(0,a.kt)("li",{parentName:"ol"},"puis ",(0,a.kt)("inlineCode",{parentName:"li"},"start-ssh-agent")),(0,a.kt)("li",{parentName:"ol"},"puis ajout de cl\xe9 publique dans Github -> profile/setting -> SSH keys -> nouvelle cl\xe9:"),(0,a.kt)("li",{parentName:"ol"},"coller contenu fichier ",(0,a.kt)("em",{parentName:"li"},".pub"),".")),(0,a.kt)("p",null,'Si Github-pages n\'arrive pas \xe0 d\xe9ployer ou si le site ne fonctionne pas, v\xe9rifiez la branche dans le d\xe9p\xf4t sur github.com : "settings / Pages / Source".'),(0,a.kt)("p",null,"L'\xe9tat du d\xe9ploiement est disponible dans \"Github.com > \\<repo",">",' > Actions".'),(0,a.kt)("h2",{id:"d\xe9ploiement"},"D\xe9ploiement"),(0,a.kt)("p",null,"Selon votre environnement, la ",(0,a.kt)("a",{parentName:"p",href:"https://docusaurus.io/docs/deployment#deploy"},"ligne de commande")," n'est pas la m\xeame. La commande va g\xe9n\xe9rer les fichiers statiques puis les pousser vers Github Pages."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-powershell"},"cmd /C 'set \"GIT_USER=<login> USE_SSH=true\" && yarn deploy'\n")),(0,a.kt)("p",null,"Si vous avez une erreur de droit : ",(0,a.kt)("inlineCode",{parentName:"p"},'Running "git push" command failed. Does the GitHub user account you are using have push access to the repository?')," : mettre une cl\xe9 dans le d\xe9p\xf4t avec les droits d'\xe9criture."),(0,a.kt)("p",null,"Si vous avez une erreur d'acc\xe8s au d\xe9p\xf4t (exemple) :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'...\n[ERROR] Deployment of the build output failed.\n[ERROR] Error: Running "git push" command failed. Does the GitHub user account you are using have push access to the repository?\nerror Command failed with exit code 1.\n...\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"V\xe9rifez qu'une paire de cl\xe9s SSH (publique + priv\xe9e) est dans ",(0,a.kt)("em",{parentName:"li"},"~/.ssh/"),", et collez le contenu de la cl\xe9 publique (fichier ",(0,a.kt)("em",{parentName:"li"},".pub"),") dans le compte ",(0,a.kt)("em",{parentName:"li"},"github.com > settings > deploy keys"),"."),(0,a.kt)("li",{parentName:"ul"},"Enlevez les vieux serveurs de ",(0,a.kt)("em",{parentName:"li"},"~/.ssh/known","_","hosts")," par ",(0,a.kt)("inlineCode",{parentName:"li"},"ssh-keygen -R <server>")," (in fichier ",(0,a.kt)("em",{parentName:"li"},"know","_","hosts.old")," est cr\xe9\xe9)."),(0,a.kt)("li",{parentName:"ul"},"Faites un ",(0,a.kt)("inlineCode",{parentName:"li"},"git clone git@github.com:<login>/<repo>.git")," du d\xe9p\xf4t dans un dossier test et v\xe9rifiez que le client git acc\xe8de au d\xe9p\xf4t, il va \xe9ventuellement demander une autorisation d'acc\xe8s () :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"The authenticity of host 'github.com (140.82.121.4)' can't be established.\nED25519 key fingerprint is SHA256:+DiY3wqssfdSFSDFsdfSFSfgfgdGDFGdfgCOqU.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\n")),(0,a.kt)("p",null,"Configurez le compte SSH sur votre poste :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'git config --global user.email "you@example.com"\ngit config --global user.name "Your Name"\n#git config --global http.sslverify false\ngit config --list\n')),(0,a.kt)("p",null,"Une fois que le code est compil\xe9 (= les pages statiques g\xe9n\xe9r\xe9es) et les fichiers pouss\xe9s sur github.com, vous obtenez ce genre de r\xe9sultat :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'...\ncreate mode 100644 blog/tags/sail/index.html\n create mode 100644 blog/tags/windows/index.html\n[INFO] `git commit -m "Deploy website - based on HEAD"` code: 0\nTo github.com:<login>/<login>.github.io.git\n   77dc572..3bad7a0  gh-pages -> gh-pages\n[INFO] `git push --force origin gh-pages` code: 0\nWebsite is live at "https://<login>.github.io/".\nDone in 26.69s\n')),(0,a.kt)("p",null,"Si l'envoi des fichier s'est mal pass\xe9, votre site peut \xeatre potentiellement \xeatre inaccessible !"))}m.isMDXComponent=!0}}]);